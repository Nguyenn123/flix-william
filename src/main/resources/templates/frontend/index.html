<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.ogr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600%7CUbuntu:300,400,500,700" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="frontend/css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="frontend/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="frontend/css/owl.carousel.min.css">
    <link rel="stylesheet" href="frontend/css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="frontend/css/nouislider.min.css">
    <link rel="stylesheet" href="frontend/css/ionicons.min.css">
    <link rel="stylesheet" href="frontend/css/plyr.css">
    <link rel="stylesheet" href="frontend/css/photoswipe.css">
    <link rel="stylesheet" href="frontend/css/default-skin.css">
    <link rel="stylesheet" href="frontend/css/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Favicons -->
    <link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
    <link rel="apple-touch-icon" href="icon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="icon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icon/apple-touch-icon-144x144.png">
<style>
    .myHidden{
        display: none;
    }
</style>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Dmitry Volkov">
    <title>FlixGo – Online Movies, TV Shows & Cinema HTML Template</title>

</head>
<body class="body" style="background-color: #2b2b31;color: #0cb457">

<!-- header -->
<header class="header">
    <div class="header__wrap">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="header__content">
                        <!-- header logo -->
                        <a href="index.html" class="header__logo">
                            <img src="frontend/img/logo.svg" alt="">
                        </a>
                        <!-- end header logo -->

                        <!-- header nav -->
                        <ul class="header__nav" id="username">
                            <li class="header__nav-item ">
                            <th:block th:if="${user}">
                                Hello! <a th:text="${user.username}" style="font-weight: bold"></a>
                            </th:block>
                            </li>
                            <!-- dropdown -->
                            <li class="header__nav-item ">
                                <a href="/home" class="header__nav-link">Home</a>
                            </li>
                            <li class="header__nav-item " >
                                <a href="/listCategory" class="header__nav-link">Catalog</a>
                            </li>

                            <!-- end dropdown -->

                            <li class="header__nav-item myHidden" id="admin">
                                <a href="/admin/" class="header__nav-link">Admin</a>
                            </li>

                        </ul>
                        <!-- end header nav -->

                        <!-- header auth -->
                        <div style="">

                            <a href="/login" class="header__sign-in" id="login"style="position: absolute;left: 1000px;top: 20px">
                                <i class="icon ion-ios-log-in"></i>
                                <span>sign in</span>
                            </a>
                            <a href="/logout" class="header__sign-in myHidden" id="logout"style="position: absolute;left: 1000px;top: 20px">
                                <i class="icon ion-ios-log-in"></i>
                                <span>Logout</span>
                            </a>
                        </div>
                        <!-- end header auth -->

                        <!-- header menu btn -->
                        <button class="header__btn" type="button">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>
                        <!-- end header menu btn -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- header search -->
    <form action="#" class="header__search">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="header__search-content">
                        <input type="text" placeholder="Search for a movie, TV Series that you are looking for">

                        <button type="button">search</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- end header search -->
</header>
<!-- end header -->
<section class="home home--bg">

<div class="container">
    <div class="row">
        <div class="col-sm-10" style="margin-top: 100px;margin-left: 140px">
            <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                    <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
                </ol>

                <div class="carousel-inner" id="newVideo">

                </div>
                <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>

</div>

</section>
<section class="home home--bg">
<div class="container">
    <div class="row">
        <div class="col-12">
            <!-- content title -->
            <h2 class="content__title">DANH SÁCH PHIM</h2>
            <!-- end content title -->

            <!-- content tabs nav -->
            <ul class="nav nav-tabs content__tabs" id="content__tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">PHIM HAY</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">PHIM XEM HAY NHẤT</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">PHIM XEM HAY NHẤT TUẦN</a>
                </li>

            </ul>
            <!-- end content tabs nav -->

            <!-- content mobile tabs nav -->
            <div class="content__mobile-tabs" id="content__mobile-tabs">
                <div class="content__mobile-tabs-btn dropdown-toggle" role="navigation" id="mobile-tabs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <input type="button" value="New items">
                    <span></span>
                </div>

                <div class="content__mobile-tabs-menu dropdown-menu" aria-labelledby="mobile-tabs">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item"><a class="nav-link active" id="1-tab" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">NEW RELEASES</a></li>

                        <li class="nav-item"><a class="nav-link" id="2-tab" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">MOVIES</a></li>

                        <li class="nav-item"><a class="nav-link" id="3-tab" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">TV SERIES</a></li>

                        <li class="nav-item"><a class="nav-link" id="4-tab" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">CARTOONS</a></li>
                    </ul>
                </div>
            </div>
            <!-- end content mobile tabs nav -->
        </div>
    </div>
<div class="row" style="padding-top: 200px" id="getAll">





</div></div>
</section>

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- JS -->
<script src="frontend/js/jquery-3.3.1.min.js"></script>
<script src="frontend/js/bootstrap.bundle.min.js"></script>
<script src="frontend/js/owl.carousel.min.js"></script>
<script src="frontend/js/jquery.mousewheel.min.js"></script>
<script src="frontend/js/jquery.mCustomScrollbar.min.js"></script>
<script src="frontend/js/wNumb.js"></script>
<script src="frontend/js/nouislider.min.js"></script>
<script src="frontend/js/plyr.min.js"></script>
<script src="frontend/js/jquery.morelines.min.js"></script>
<script src="frontend/js/photoswipe.min.js"></script>
<script src="frontend/js/photoswipe-ui-default.min.js"></script>
<script src="frontend/js/main.js"></script>
<script>
    const URL_API = "http://localhost:8080/";
    var buttonLogin = document.querySelector('#login')
    var showAdmin = document.querySelector('#admin')
    var buttonLogout = document.querySelector('#logout')
function userLogin(){
    $.ajax({
        type: "GET",
        url: URL_API + "api/account/ss",
        success : function (res){

            console.log(res.data)
            if (res.data!=null){
                buttonLogin.classList.add('myHidden')
                showAdmin.classList.remove('myHidden')
                buttonLogout.classList.remove('myHidden')
                if (res.data.role=10002){
                    showAdmin.classList.add("myHidden")

                }
            }else {
                buttonLogin.classList.remove('myHidden')
                showAdmin.classList.add('myHidden')
                buttonLogout.classList.add('myHidden')
            }
        }
    })
}
userLogin()
    function showCategory() {
        $.ajax({
            type: "GET",
            url: URL_API + "api/videosHome/videosnew",

            success: function (responce) {
                console.log(responce.data[1].imgVideo)
                var videosNew = document.getElementById('newVideo');
                videosNew.innerHTML = `<div class="carousel-item active">
                        <img src="/database/images/${responce.data[0].imgVideo}" style="height: 600px" class="d-block w-100" alt="...">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Film New</h5>
                            <p>${responce.data[0].title}</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="/database/images/${responce.data[1].imgVideo}" style="height: 600px" class="d-block w-100" alt="...">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Film New</h5>
                            <p>${responce.data[1].title}</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="/database/images/${responce.data[2].imgVideo}" style="height: 600px" class="d-block w-100" alt="...">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Film New</h5>
                            <p>${responce.data[2].title}</p>
                        </div>
                    </div>`;
                init()

            }
            ,
            error: function () {

            }
        });
    }


    // function init() {
    //     document.getElementById("getAll").innerHTML = "";
    //     $.ajax({
    //         type: "GET",
    //         url: URL_API+"api/videosHome",
    //         success: function (resp) {
    //             $.each(resp.data, function (index, video) {
    //                 $('<div class="col-lg-6">').append(
    //                     $('<div class="card" style="height: 400px;width: 100%">').append($('<div >').append(
    //                         $('<div>').append($('<a href="#">').append($('<img style="height: 350px;width: 100%" src="'+video.imgVideo+'">'))
    //                             .append($('<span style="font-size: large;font-weight: bold">').text(video.title)).append($('<br>')).append($('<a href="#">').text(' trailer'))
    //                             .append($('<a href="#">').text(' Xem Phim')))
    //                     ))
    //                 ).appendTo('#getAll')
    //             })
    //         }
    //     })
    // }


    function init() {

        $.ajax({
            type: "GET",
            url: URL_API+"api/videosHome",
            success: function (resp) {
                var abc = document.getElementById("getAll");
                abc.innerHTML =``;
                var abcd = ""
                $.each(resp.data, function (index, video) {
                 abcd+=`   <div class="col-sm-6" >
        <div class="card" style="background-color: #2b2b31!important;border: none!important;">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6">
                        <div>
                            <img src="/database/images/${video.imgVideo}" style="height: 350px;width: 100%;">
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div>
                            <dl class="row">
                                <dt class="9">${video.title}</dt>
                                <dd class="9"><a href="/detail?idVideos=${video.id}">Xem phim</a><a href="#"> Trailer</a></dd>
                                <dt class="col-sm-9">category : </dt>
                                <dd class="col-sm-9">${video.categoryId}</dd>
                                <dt class="col-sm-9 text-truncate">ratting :</dt>
                                <dd class="col-sm-9"><span>${video.imdbScore}<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
  <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
</svg></span> </dd>
                                <dt class="col-sm-9 text-truncate">Description :</dt>
                                <dd class="col-sm-9">${video.description} </dd>

                            </dl>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>`
                }
                )
              abc.innerHTML =abcd
            }
        })
    }
    showCategory()
</script>
</body>

</html>