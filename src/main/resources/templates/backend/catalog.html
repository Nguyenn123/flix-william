<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- Mirrored from dmitryvolkov.me/demo/flixgo2.0/admin/catalog.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 08 Jan 2021 02:59:57 GMT -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- CSS -->
	<link rel="stylesheet" href="backend/css/bootstrap-reboot.min.css">
	<link rel="stylesheet" href="backend/css/bootstrap-grid.min.css">
	<link rel="stylesheet" href="backend/css/magnific-popup.css">
	<link rel="stylesheet" href="backend/css/jquery.mCustomScrollbar.min.css">
	<link rel="stylesheet" href="backend/css/select2.min.css">
	<link rel="stylesheet" href="backend/css/ionicons.min.css">
	<link rel="stylesheet" href="backend/css/admin.css">

	<!-- Favicons -->
	<link rel="icon" type="image/png" href="backend/icon/favicon-32x32.png" sizes="32x32">
	<link rel="apple-touch-icon" href="backend/icon/favicon-32x32.png">

	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Dmitry Volkov">
	<title>FlixGo – Online Movies, TV Shows & Cinema HTML Template</title>

	<style>
		.myHidden{
			display: none;
		}
	</style>
</head>
<body>

<!-- header -->
<header class="header">
	<div class="header__content">
		<!-- header logo -->
		<a href="/" class="header__logo">
			<img src="backend/img/logo.svg" alt="">
		</a>
		<!-- end header logo -->

		<!-- header menu btn -->
		<button class="header__btn" type="button">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<!-- end header menu btn -->
	</div>
</header>
<!-- end header -->

<!-- sidebar -->
<div class="sidebar">
	<!-- sidebar logo -->
	<a href="/" class="sidebar__logo">
		<img src="backend/img/logo.svg" alt="">

	</a>
	<!-- end sidebar logo -->

	<!-- sidebar user -->
	<div class="sidebar__user">
		<div class="sidebar__user-img">
			<img src="backend/img/user.svg" alt="">
		</div>

		<div class="sidebar__user-title">
			<span>Admin</span>
			<p>John Doe</p>
		</div>

		<a href="/logout" class="sidebar__user-btn" type="button">
			<i class="icon ion-ios-log-out"></i>
		</a>
	</div>
	<!-- end sidebar user -->

	<!-- sidebar nav -->
	<ul class="sidebar__nav">
		<li class="sidebar__nav-item">
			<a href="/admin/" class="sidebar__nav-link"><i class="icon ion-ios-keypad"></i> Dashboard</a>
		</li>

		<li class="sidebar__nav-item">
			<button onclick="showCatalog()" class="sidebar__nav-link sidebar__nav-link--active"><i class="icon ion-ios-film"></i>
				Catalog</button>
		</li>

		<li class="sidebar__nav-item">
			<a href="/admin/" class="sidebar__nav-link"><i class="icon ion-ios-film"></i> Category</a>
		</li>

		<li class="sidebar__nav-item">
			<a href="users.html" class="sidebar__nav-link"><i class="icon ion-ios-contacts"></i> Users</a>
		</li>

		<li class="sidebar__nav-item">
			<a href="comments.html" class="sidebar__nav-link"><i class="icon ion-ios-chatbubbles"></i> Comments</a>
		</li>

		<li class="sidebar__nav-item">
			<a href="reviews.html" class="sidebar__nav-link"><i class="icon ion-ios-star-half"></i> Reviews</a>
		</li>

		<!-- dropdown -->
		<li class="dropdown sidebar__nav-item">
			<a class="dropdown-toggle sidebar__nav-link" href="#" role="button" id="dropdownMenuMore"
			   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="icon ion-ios-copy"></i> Pages</a>

			<ul class="dropdown-menu sidebar__dropdown-menu scrollbar-dropdown" aria-labelledby="dropdownMenuMore">
				<li><a href="add-item.html">Add item</a></li>
				<li><a href="edit-user.html">Edit user</a></li>
				<li><a href="signin.html">Sign In</a></li>
				<li><a href="signup.html">Sign Up</a></li>
				<li><a href="forgot.html">Forgot password</a></li>
				<li><a href="404.html">404 Page</a></li>
			</ul>
		</li>
		<!-- end dropdown -->
	</ul>
	<!-- end sidebar nav -->

	<!-- sidebar copyright -->
	<div class="sidebar__copyright">© 2020 FlixGo. <br>Create by <a
			href="https://themeforest.net/user/dmitryvolkov/portfolio" target="_blank">Dmitry Volkov</a></div>
	<!-- end sidebar copyright -->
</div>
<!-- end sidebar -->

<!-- main content -->
<main class="main" id="catalogDashboard">
	<div class="container-fluid">
		<div class="row">
			<!-- main title -->
			<div class="col-12">
				<div class="main__title">
					<h2>Catalog</h2>

					<span class="main__title-stat">14,452 Total</span>

					<a href="/admin/new-video" class="form__btn ml-5">
						<span>add new</span>
					</a>

					<div class="main__title-wrap">
						<!-- filter sort -->
						<div class="filter" id="filter__sort">
							<span class="filter__item-label">Sort by:</span>

							<div class="filter__item-btn dropdown-toggle" role="navigation" id="filter-sort"
								 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<input type="button" value="Date created">
								<span></span>
							</div>

							<ul class="filter__item-menu dropdown-menu scrollbar-dropdown"
								aria-labelledby="filter-sort">
								<li>Date created</li>
								<li>Rating</li>
								<li>Views</li>
							</ul>
						</div>
						<!-- end filter sort -->

						<!-- search -->
						<form action="#" class="main__title-form">
							<input type="text" placeholder="Find movie / tv series..">
							<button type="button">
								<i class="icon ion-ios-search"></i>
							</button>
						</form>
						<!-- end search -->
					</div>
				</div>
			</div>
			<!-- end main title -->

			<!-- users -->
			<div class="col-12">
				<div class="main__table-wrap">
					<table class="main__table">
						<thead>
						<tr>
							<th>ID</th>
							<th>TITLE</th>
							<th>RATING</th>
							<th>CATEGORY</th>
							<th>VIEWS</th>
							<th>STATUS</th>
							<th>CREATED DATE</th>
							<th>ACTIONS</th>
						</tr>
						</thead>

						<tbody>
						<tr>
							<td>
								<div class="main__table-text">24</div>
							</td>
							<td>
								<div class="main__table-text">Benched</div>
							</td>
							<td>
								<div class="main__table-text main__table-text--rate"><i class="icon ion-ios-star"></i>
									7.1
								</div>
							</td>
							<td>
								<div class="main__table-text">Movie</div>
							</td>
							<td>
								<div class="main__table-text">1093</div>
							</td>
							<td>
								<div class="main__table-text main__table-text--red">Hidden</div>
							</td>
							<td>
								<div class="main__table-text">24 Oct 2019</div>
							</td>
							<td>
								<div class="main__table-btns">
									<a href="#modal-status" class="main__table-btn main__table-btn--banned open-modal">
										<i class="icon ion-ios-lock"></i>
									</a>
									<a href="#" class="main__table-btn main__table-btn--view">
										<i class="icon ion-ios-eye"></i>
									</a>
									<a href="#modal-edit" class="main__table-btn main__table-btn--edit open-modal">
										<i class="icon ion-ios-create"></i>
									</a>
									<a href="#modal-delete" class="main__table-btn main__table-btn--delete open-modal">
										<i class="icon ion-ios-trash"></i>
									</a>
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<div class="main__table-text">25</div>
							</td>
							<td>
								<div class="main__table-text">Whitney</div>
							</td>
							<td>
								<div class="main__table-text main__table-text--rate"><i class="icon ion-ios-star"></i>
									6.3
								</div>
							</td>
							<td>
								<div class="main__table-text">TV Series</div>
							</td>
							<td>
								<div class="main__table-text">723</div>
							</td>
							<td>
								<div class="main__table-text main__table-text--green">Visible</div>
							</td>
							<td>
								<div class="main__table-text">24 Oct 2019</div>
							</td>
							<td>
								<div class="main__table-btns">
									<a href="#modal-status" class="main__table-btn main__table-btn--banned open-modal">
										<i class="icon ion-ios-lock"></i>
									</a>
									<a href="#" class="main__table-btn main__table-btn--view">
										<i class="icon ion-ios-eye"></i>
									</a>
									<a href="#modal-edit" class="main__table-btn main__table-btn--edit open-modal">
										<i class="icon ion-ios-create"></i>
									</a>
									<a href="#modal-delete" class="main__table-btn main__table-btn--delete open-modal">
										<i class="icon ion-ios-trash"></i>
									</a>
								</div>
							</td>
						</tr>
						</tbody>
						<tbody id="dataTable">

						</tbody>
					</table>
				</div>
			</div>
			<!-- end users -->

			<div id="testModal"></div>

			<!-- paginator -->
			<div class="col-12">
				<div class="paginator-wrap">
					<span>10 from 14 452</span>

					<ul class="paginator">
						<li class="paginator__item paginator__item--prev">
							<a href="#"><i class="icon ion-ios-arrow-back"></i></a>
						</li>
						<li class="paginator__item"><a href="#">1</a></li>
						<li class="paginator__item paginator__item--active"><a href="#">2</a></li>
						<li class="paginator__item"><a href="#">3</a></li>
						<li class="paginator__item"><a href="#">4</a></li>
						<li class="paginator__item paginator__item--next">
							<a href="#"><i class="icon ion-ios-arrow-forward"></i></a>
						</li>
					</ul>
				</div>
			</div>
			<!-- end paginator -->
		</div>
	</div>
</main>
<!-- end main content -->

<!-- modal edit -->
<main class="main myHidden" id="editCatalog">
	<div class="container-fluid">
		<div class="row">
			<!-- main title -->
			<div class="col-12">
				<div class="main__title">
					<h2>Edit item</h2>
				</div>
			</div>
			<!-- end main title -->

			<!-- form -->
			<div class="col-12">
				<form method="post"  enctype="multipart/form-data" class="form">
					<div class="row">
						<div class="col-12 col-md-5 form__cover">
							<div class="row">
								<div class="col-12 col-sm-6 col-md-12">
									<div class="form__img">
										<label for="form__img-upload">Upload cover (270 x 400)</label>
										<input id="form__img-upload" name="imgVideo" type="file" accept=".png, .jpg, .jpeg">
										<img id="form__img" alt=" ">
									</div>
								</div>
							</div>
						</div>

						<div class="col-12 col-md-7 form__content">
							<div class="row">
								<div class="col-12">
									<input type="text" id="title" name="title" class="form__input"  placeholder="Title">
								</div>

								<div class="col-12">
									<textarea id="description" name="description" class="form__textarea" placeholder="Description"></textarea>
								</div>

								<div class="col-12 col-sm-6 col-lg-3">
									<input type="number" class="form__input" id="imdbScore" name="imdbScore" placeholder="Imdb score">
								</div>

								<div class="col-12 col-sm-6 col-lg-3">
									<select class="js-example-basic-single" name="categoryId" id="Category">
										<option value="10001">10001</option>

									</select>
								</div>

								<div class="col-12 col-sm-6 col-lg-3">
									<input type="number" id="accountId" name="accountId" class="form__input" placeholder="AccountId">
								</div>

								<div class="col-12 col-sm-6 col-lg-3">
									<select class="js-example-basic-single" name="statusVideo" id="StatusVideo">
										<option value="10001">10001</option>

									</select>
								</div>

							</div>
						</div>

						<div class="col-12">
							<ul class="form__radio">
								<li>
									<span>Item type:</span>
								</li>
								<li>
									<input id="type1" type="radio" name="type" data-toggle="collapse" data-target=".multi-collapse" checked="">
									<label for="type1">Movie</label>
								</li>
								<li>
									<input id="type2" type="radio" name="type" data-toggle="collapse" data-target=".multi-collapse">
									<label for="type2">TV Series</label>
								</li>
							</ul>
						</div>

						<div class="col-12">
							<div class="row">
								<!-- movie -->
								<div class="col-12">
									<div class="collapse show multi-collapse" id="multiCollapseExample12">
										<div class="form__video">
											<label id="movie12" for="form__video-upload2">Upload trailer video</label>
											<input data-name="#movie12" id="form__video-upload2" name="videotrailerEmbed" class="form__video-upload" type="file" accept="video/mp4,video/x-m4v,video/*">
										</div>
									</div>
								</div>
								<!-- end movie -->
								<!-- movie -->
								<div class="col-12">
									<div class="collapse show multi-collapse" id="multiCollapseExample1">
										<div class="form__video">
											<label id="movie1" for="form__video-upload">Upload video</label>
											<input data-name="#movie1" id="form__video-upload" name="videoEmbed" class="form__video-upload" type="file" accept="video/mp4,video/x-m4v,video/*">
										</div>
									</div>
								</div>
								<!-- end movie -->

								<div class="col-12">
									<button type="submit" class="form__btn">publish</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
			<!-- end form -->
		</div>
	</div>
</main>
<!-- end modal edit -->

<!-- modal status -->
<div id="modal-status" class="zoom-anim-dialog mfp-hide modal">
	<h6 class="modal__title">Item delete</h6>

	<p class="modal__text">Are you sure to permanently delete this item?</p>

	<div class="modal__btns">
		<button class="modal__btn modal__btn--apply" type="button">Delete</button>
		<button class="modal__btn modal__btn--dismiss" type="button">Dismiss</button>
	</div>
</div>
<!-- end modal status -->

<!-- modal delete -->
<div id="modal-delete" class="zoom-anim-dialog mfp-hide modal">
	<h6 class="modal__title">Item delete</h6>

	<p class="modal__text">Are you sure to permanently delete this item?</p>

	<div class="modal__btns">
		<button class="modal__btn modal__btn--apply" type="button">Delete</button>
		<button class="modal__btn modal__btn--dismiss" type="button">Dismiss</button>
	</div>
</div>
<!-- end modal delete -->

<!-- JS -->
<script src="backend/js/jquery-3.5.1.min.js"></script>
<script src="backend/js/bootstrap.bundle.min.js"></script>
<script src="backend/js/jquery.magnific-popup.min.js"></script>
<script src="backend/js/jquery.mousewheel.min.js"></script>
<script src="backend/js/jquery.mCustomScrollbar.min.js"></script>
<script src="backend/js/select2.min.js"></script>
<script src="backend/js/admin.js"></script>

<script>
	let idPost = 0;

	var catalog = document.querySelector('#catalogDashboard');
	var editCatalog = document.querySelector('#editCatalog');

	function showCatalog(){
		catalog.classList.remove('myHidden');
		editCatalog.classList.add('myHidden');
	}

	function showCatalogEdit(id){
		idPost = id;

		$.ajax({
			url: "/api/videos/find?idVideo="+id,
			type: "GET",
			success: function (resp){
				debugger
				$("#form__img").attr("src","/database/images/"+resp.data.imgVideo);

				$('#title').val(resp.data.title);
				$('#description').val(resp.data.description);
				$('#imdbScore').val(resp.data.imdbScore);
				$('#Category').val(resp.data.categoryId);
				$('#accountId').val(resp.data.accountId);
				$('#StatusVideo').val(resp.data.statusVideo);
				$('#form__video-upload2').attr("placeholder",resp.data.videotrailerEmbed);
				$('#form__video-upload').attr('placeholder',resp.data.videoEmbed);
			},
		})

		catalog.classList.add('myHidden');
		editCatalog.classList.remove('myHidden');
	}

	function init() {
		document.getElementById("dataTable").innerHTML = "";
		$.ajax({
			type: "GET",
			url: "/api/videos",
			success: function (resp) {
				$.each(resp.data, function (index, video) {
					$('<tr>').append(
							$('<td>').append(
									$('<div class="main__table-text">').text(video.id)),
							$('<td>').append(
									$('<a href="/detail?idVideos='+ video.id +'" class="main__table-text">').text(video.title)),
							$('<td>').append(
									$('<div class="main__table-text main__table-text--rate">').text(video.imdbScore ).append(
											$('<i class="icon ion-ios-star">'))),
							$('<td>').append(
									$('<div class="main__table-text">').text(video.categoryId)),
							$('<td>').append(
									$('<div class="main__table-text">').append(
											$('<img height="50" width="50" src="/database/images/'+ video.imgVideo +'">')
									)),
							$('<td>').append(
									$('<div class="main__table-text">').text(video.statusVideo)),
							$('<td>').append(
									$('<div class="main__table-text">').text(video.createtime)),
							$('<td>').append(
									$('<div class="main__table-btns">').append(
											$('<a href="#" class="main__table-btn main__table-btn--banned">').append(
													$('<i class="icon ion-ios-lock"></i>')),
											$('<a href="/detail?idVideos='+ video.id +'" class="main__table-btn main__table-btn--view">').append(
													$(' <i class="icon ion-ios-eye"></i>')),
											$('<button onclick="showCatalogEdit('+video.id+')" class="main__table-btn main__table-btn--edit">').append(
													$('<i class="icon ion-ios-create"></i>')),
											$('<button onclick="remote('+video.id+')" class="main__table-btn main__table-btn--delete open-modal">').append(
													$('<i class="icon ion-ios-trash"></i>'))
									)
							)
					).appendTo('#dataTable');
				});
			},
		});
	}

	init();

	function remote(id) {
		idPost = id
		$.ajax({
			headers: {
				'Accept': 'application/json',
				'Content-Type': 'application/json'
			},
			type: "DELETE",
			url: "/api/videos?idVideo=" + idPost,
			success: function (prod) {
				init();
			}
		});
	}

	$("form").submit(function (evt) {
		evt.preventDefault();
		var formData = new FormData($(this)[0]);
		debugger
		$.ajax({
			url: '/admin/edit?id=' + idPost,
			type: 'POST',
			data: formData,
			async: false,
			cache: false,
			contentType: false,
			enctype: 'multipart/form-data',
			processData: false,
			success: function (response) {
				alert(response);
				init();
			}
		});
		return false;
	});

</script>
</body>

<!-- Mirrored from dmitryvolkov.me/demo/flixgo2.0/admin/catalog.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 08 Jan 2021 02:59:57 GMT -->
</html>