<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from dmitryvolkov.me/demo/flixgo2.0/admin/users.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 08 Jan 2021 02:59:57 GMT -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- CSS -->
	<link rel="stylesheet" href="backend/css/bootstrap-reboot.min.css">
	<link rel="stylesheet" href="backend/css/bootstrap-grid.min.css">
	<link rel="stylesheet" href="backend/css/magnific-popup.css">
	<link rel="stylesheet" href="backend/css/jquery.mCustomScrollbar.min.css">
	<link rel="stylesheet" href="backend/css/select2.min.css">
	<link rel="stylesheet" href="backend/css/ionicons.min.css">
	<link rel="stylesheet" href="backend/css/admin.css">


	<!-- Favicons -->
	<link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
	<link rel="apple-touch-icon" href="icon/favicon-32x32.png">
	<style>.myHidden{
		display: none;
	}</style>
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Dmitry Volkov">
	<title>FlixGo – Online Movies, TV Shows & Cinema HTML Template</title>

</head>
<body>

	<!-- header -->
	<header class="header">
		<div class="header__content">
			<!-- header logo -->
			<a href="index.html" class="header__logo">
				<img src="img/logo.svg" alt="">
			</a>
			<!-- end header logo -->

			<!-- header menu btn -->
			<button class="header__btn" type="button">
				<span></span>
				<span></span>
				<span></span>
			</button>
			<!-- end header menu btn -->
		</div>
	</header>
	<!-- end header -->

	<!-- sidebar -->
	<div class="sidebar">
		<!-- sidebar logo -->
		<a href="/" class="sidebar__logo">
			<img src="backend/img/logo.svg" alt="">
		</a>
		<!-- end sidebar logo -->
		
		<!-- sidebar user -->
		<div class="sidebar__user">
			<div class="sidebar__user-img">
				<img src="backend/img/user.svg" alt="">
			</div>

			<div class="sidebar__user-title">
				<span>Admin</span>
				<div id="sessionname"></div>
			</div>

			<button class="sidebar__user-btn" type="button">
				<i class="icon ion-ios-log-out"></i>
			</button>
		</div>
		<!-- end sidebar user -->

		<!-- sidebar nav -->
		<ul class="sidebar__nav">
			<li class="sidebar__nav-item">
				<a href="/admin/" class="sidebar__nav-link"><i class="icon ion-ios-keypad"></i> Dashboard</a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/catalog" class="sidebar__nav-link"><i class="icon ion-ios-film"></i> Catalog</a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/user" class="sidebar__nav-link sidebar__nav-link--active"><i class="icon ion-ios-contacts"></i> Users</a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/comments" class="sidebar__nav-link"><i class="icon ion-ios-chatbubbles"></i> Comments</a>
			</li>

			<li class="sidebar__nav-item">
				<a href="reviews.html" class="sidebar__nav-link"><i class="icon ion-ios-star-half"></i> Reviews</a>
			</li>

			<!-- dropdown -->
			<li class="dropdown sidebar__nav-item">
				<a class="dropdown-toggle sidebar__nav-link" href="#" role="button" id="dropdownMenuMore" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="icon ion-ios-copy"></i> Pages</a>

				<ul class="dropdown-menu sidebar__dropdown-menu scrollbar-dropdown" aria-labelledby="dropdownMenuMore">
					<li><a href="add-item.html">Add item</a></li>
					<li><a href="edit-user.html">Edit user</a></li>
					<li><a href="signin.html">Sign In</a></li>
					<li><a href="signup.html">Sign Up</a></li>
					<li><a href="forgot.html">Forgot password</a></li>
					<li><a href="404.html">404 Page</a></li>
				</ul>
			</li>
			<!-- end dropdown -->
		</ul>
		<!-- end sidebar nav -->
		
		<!-- sidebar copyright -->
		<div class="sidebar__copyright">© 2020 FlixGo. <br>Create by <a href="https://themeforest.net/user/dmitryvolkov/portfolio" target="_blank">Dmitry Volkov</a></div>
		<!-- end sidebar copyright -->
	</div>
	<!-- end sidebar -->
-------------------------------------------------------------------------------------------------
	<!-- main content -->
	<main class="main" id="user-main">
		<div class="container-fluid">
			<div class="row">
				<!-- main title -->
				<div class="col-12">
					<div class="main__title">
						<h2>Users</h2>

						<span class="main__title-stat">3,702 Total</span>
						<div class="col-3">
							<button class="profile__btn" id="createUser" type="button">Create</button>
						</div>
						<div class="main__title-wrap">
							<!-- filter sort -->
							<div class="filter" id="filter__sort">
								<span class="filter__item-label">Sort by:</span>

								<div class="filter__item-btn dropdown-toggle" role="navigation" id="filter-sort" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<input type="button" value="Date created">
									<span></span>
								</div>

								<ul class="filter__item-menu dropdown-menu scrollbar-dropdown" aria-labelledby="filter-sort">
									<li>Date created</li>
									<li>Pricing plan</li>
									<li>Status</li>
								</ul>
							</div>
							<!-- end filter sort -->

							<!-- search -->
							<form action="#" class="main__title-form">
								<input type="text" placeholder="Find user..">
								<button type="button">
									<i class="icon ion-ios-search"></i>
								</button>
							</form>
							<!-- end search -->
						</div>
					</div>
				</div>
				<!-- end main title -->

				<!-- users -->
				<div class="col-12">
					<div class="main__table-wrap">
						<table class="main__table">
							<thead>
								<tr>
									<th>ID</th>
									<th>USER NAME</th>
									<th>PASSWORD</th>
									<th>EMAIL</th>
									<th>PHONE NUMBER</th>
									<th>ROLE</th>
									<th>STATUS ACCOUNT</th>
									<th>STATUS MEMBER</th>
									<th>CREATED DATE</th>
									<th>ACTIONS</th>
								</tr>
							</thead>
							<tbody id="dataTable"></tbody>
						</table>
					</div>
				</div>
				<!-- end users -->

				<!-- paginator -->
				<div class="col-12">
					<div class="paginator-wrap">
						<span>10 from 3 702</span>

						<ul class="paginator">
							<li class="paginator__item paginator__item--prev">
								<a href="#"><i class="icon ion-ios-arrow-back"></i></a>
							</li>
							<li class="paginator__item"><a href="#">1</a></li>
							<li class="paginator__item paginator__item--active"><a href="#">2</a></li>
							<li class="paginator__item"><a href="#">3</a></li>
							<li class="paginator__item"><a href="#">4</a></li>
							<li class="paginator__item paginator__item--next">
								<a href="#"><i class="icon ion-ios-arrow-forward"></i></a>
							</li>
						</ul>
					</div>
				</div>
				<!-- end paginator -->
			</div>
		</div>
	</main>
	<!-- end main content -->

	<main class="main myHidden" id="save-user">
		<div class="container-fluid">
			<div class="row">
				<!-- main title -->
				<div class="col-12">
					<div class="main__title">
						<h2 id="title"></h2>
					</div>
				</div>
				<!-- end main title -->

				<!-- profile -->
				<div class="col-12">
					<div class="profile__content">
						<!-- profile user -->

						<!-- or red -->
						<div class="profile__meta profile__meta--green">
							<h3 id="titel"><span>(Approved)</span></h3>
							<span id="iduser"></span>
						</div>
					</div>
					<!-- end profile user -->


					<!-- profile mobile tabs nav -->
					<div class="profile__mobile-tabs" id="profile__mobile-tabs">
						<div class="profile__mobile-tabs-btn dropdown-toggle" role="navigation" id="mobile-tabs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<input type="button" value="Profile">
							<span></span>
						</div>

						<div class="profile__mobile-tabs-menu dropdown-menu" aria-labelledby="mobile-tabs">
							<ul class="nav nav-tabs" role="tablist">
								<li class="nav-item"><a class="nav-link active" id="1-tab" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">Profile</a></li>

								<li class="nav-item"><a class="nav-link" id="2-tab" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">Comments</a></li>

								<li class="nav-item"><a class="nav-link" id="3-tab" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">Reviews</a></li>
							</ul>
						</div>
					</div>
					<!-- end profile mobile tabs nav -->

					<!-- profile btns -->

					<!-- end profile btns -->
				</div>
			</div>
			<!-- end profile -->

			<!-- content tabs -->
			<div class="tab-content" id="myTabContent">
				<div class="tab-pane fade show active" id="tab-1" role="tabpanel" aria-labelledby="1-tab">
					<div class="col-12">
						<div class="row">
							<!-- details form -->
							<div class="col-12 col-lg-6">
								<form action="#" class="profile__form">
									<div class="row">
										<div class="col-12">
											<h4 class="profile__title">User details</h4>
										</div>
										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="id">ID</label>
												<input id="id" type="text" name="id" class="profile__input" disabled>
											</div>
										</div>
										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="username">USER NAME</label>
												<input id="username" type="text" name="username" class="profile__input" >
											</div>
										</div>

										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="email">EMAIL</label>
												<input id="email" type="text" name="email" class="profile__input" >
											</div>
										</div>

										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="phonenumber">PHONE NUMBER </label>
												<input id="phonenumber" type="text" name="phonenumber"  class="profile__input" >
											</div>
										</div>

										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="oldpass">Old Password</label>
												<input id="oldpass" type="password" name="oldpass" class="profile__input">
											</div>
										</div>


										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" >STATUS MEMBER</label>
                                                <select class="js-example-basic-single" id="statusmember">
                                                    <option id="statusmemberDefault"></option>

                                                </select>
											</div>
										</div>

										<div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="role">ROLE</label>
												<select class="js-example-basic-single" id="role">
                                                    <option id="roleDefault"></option>
												</select>
											</div>
										</div>

                                        <div class="col-12 col-md-6 col-lg-12 col-xl-6">
											<div class="profile__group">
												<label class="profile__label" for="statusaccount">STATUUS ACCOUNT</label>
												<select class="js-example-basic-single"  id="statusaccount">
                                                    <option id="statusaccountDefault"></option>
                                                    <option value="10002">LOCK</option>
                                                    <option value="10001">UNLOCK</option>
												</select>
											</div>
										</div>

										<div class="col-12">
											<button class="profile__btn" id="updateUser" type="button">Save</button>
										</div>
									</div>
								</form>
							</div>
							<!-- end details form -->

							<!-- password form -->
<!--							<div class="col-12 col-lg-6">-->
<!--								<form action="#" class="profile__form">-->
<!--									<div class="row">-->
<!--										<div class="col-12">-->
<!--											<h4 class="profile__title">Change password</h4>-->
<!--										</div>-->

<!--										<div class="col-12 col-md-6 col-lg-12 col-xl-6">-->
<!--											<div class="profile__group">-->
<!--												<label class="profile__label" for="oldpass">Old Password</label>-->
<!--												<input id="oldpass" type="password" name="oldpass" class="profile__input">-->
<!--											</div>-->
<!--										</div>-->

<!--										<div class="col-12 col-md-6 col-lg-12 col-xl-6">-->
<!--											<div class="profile__group">-->
<!--												<label class="profile__label" for="newpass">New Password</label>-->
<!--												<input id="newpass" type="password" name="newpass" class="profile__input">-->
<!--											</div>-->
<!--										</div>-->

<!--										<div class="col-12 col-md-6 col-lg-12 col-xl-6">-->
<!--											<div class="profile__group">-->
<!--												<label class="profile__label" for="confirmpass">Confirm New Password</label>-->
<!--												<input id="confirmpass" type="password" name="confirmpass" class="profile__input">-->
<!--											</div>-->
<!--										</div>-->

<!--										<div class="col-12">-->
<!--											<button class="profile__btn" type="button">Change</button>-->
<!--										</div>-->
<!--									</div>-->
<!--								</form>-->
<!--							</div>-->
							<!-- end password form -->
						</div>
					</div>
				</div>

			</div>
		</div>
	</main>

	<!-- JS -->
	<script src="backend/js/jquery-3.5.1.min.js"></script>
	<script src="backend/js/bootstrap.bundle.min.js"></script>
	<script src="backend/js/jquery.magnific-popup.min.js"></script>
	<script src="backend/js/jquery.mousewheel.min.js"></script>
	<script src="backend/js/jquery.mCustomScrollbar.min.js"></script>
	<script src="backend/js/select2.min.js"></script>
	<script src="backend/js/admin.js"></script>
</body>
<script>
	$(document).ready(showList());
	function showList() {
		document.getElementById("dataTable").innerHTML="";
		$.ajax({
			type: "GET",
			url: "http://localhost:8080/api/account",
			success: function (account) {
				document.getElementById("sessionname").innerHTML=`<p>ddm</p> `
				$.each(account.data, function (index, item) {
					$('<tr>').append(
							$('<td>').append($('<div class="main__table-text">').text(item.id)),
							$('<td>').append($('<div class="main__table-text">').text(item.username)),
							$('<td>').append($('<div class="main__table-text">').text(item.password)),
							$('<td>').append($('<div class="main__table-text">').text(item.email)),
							$('<td>').append($('<div class="main__table-text">').text(item.phoneNumber)),
							$('<td>').append($('<div class="main__table-text">').text(item.role)),
							$('<td>').append($('<div class="main__table-text">').text(item.statusAccount)),
							$('<td>').append($('<div class="main__table-text">').text(item.statusMember)),
							$('<td>').append($('<div class="main__table-text">').text(item.createTime)),
							$('<td>').append(
									$('<div class="main__table-btns">').append(
										// $('<a href="#modal-status" class="main__table-btn main__table-btn--banned open-modal">').append($('<i class="icon ion-ios-lock">')),
										$('<button class="main__table-btn main__table-btn--edit" onclick="showEdit('+item.id+')">').append($('<i class="icon ion-ios-create">')),
										$('<button type="button" onclick="remove('+item.id+')" class="main__table-btn main__table-btn--delete">').append($('<i class="icon ion-ios-trash">')),
									)
							)
					).appendTo('#dataTable');
				});
			},
			error: function () {
			}
		})
	}



	function remove(id) {
		if (confirm("you are sure?")) {
			$.ajax({
				headers: {
					'Accept': 'application/json',
					'Content-Type': 'application/json'
				},
				type: "DELETE",
				url: "http://localhost:8080/api/account/" + id,
				success: function (res) {
					if (res.status == 1) {
						alert("Xóa thành công!")
						showList();
					} else {
						alert("tach tach");
					}
				},
				error: function () {
				}
			});
		}
	}
	var showEditPage= document.querySelector("#save-user")
	var showUserPage=document.querySelector("#user-main")

	function showEdit(id) {
		showEditPage.classList.remove("myHidden");
		showUserPage.classList.add("myHidden");
		$("#title").append("User Edit")
		$.ajax({
			headers: {
				'Accept': 'application/json',
				'Content-Type': 'application/json'
			},
			type: "GET",
			url: "http://localhost:8080/api/account/find?id=" + id,
			success: function (res) {
			    console.log(res)
				$('#id').val(res.data.id)
				$('#username').val(res.data.username)
				$('#email').val(res.data.email)
				$('#phonenumber').val(res.data.phoneNumber)
				$('#oldpass').val(res.data.password)
                $('#statusmemberDefault').val(res.data.statusMember)
                $('#statusmemberDefault').text(res.data.statusMember)
                $('#statusaccountDefault').val(res.data.statusAccount)
                $('#statusaccountDefault').text(res.data.statusAccount)
                $('#roleDefault').val(res.data.role)
                $('#roleDefault').text(res.data.role)
                console.log(res.data)
                // let option1 = document.createElement("option");
				// $('#statusmember').empty();
				// option1.value = "1004";
				// option1.text = "VIp 1";
				// let optionResponse = document.createElement("option");
				// optionResponse.text = "VIpppp";
				// optionResponse.value = res.data.statusMember;
				// $('#statusmember').append(option1, optionResponse);
                $('#titel').text(res.data.username)
                $("#iduser").text("ID USER"+" "+res.data.id)

            },
			error: function () {
			}
		});

	}

	$(document).ready(function () {
		var account = {}
		var linkUrl = "";
		var methodName = "";
		$('#createUser').click(function () {
			showUserPage.classList.add('myHidden')
			showEditPage.classList.remove('myHidden')
            $("#title").append("Create new user")
			$('#id').val("")
		})
		$('#updateUser').click(function () {
			account.username = $("#username").val()
			account.email = $("#email").val()
			account.phoneNumber = $("#phonenumber").val()
			account.password = $("#oldpass").val()
            account.role = $('#role').val()
            account.statusMember = $('#statusmember').val()
            account.statusAccount = $('#statusaccount').val()
			var id = $("#id").val()
			if (id) {
				linkUrl = "http://localhost:8080/api/account/"+id
				console.log(linkUrl)
				methodName = "PUT"
				account.id = id
			} else {
				methodName = "POST"
				linkUrl = "http://localhost:8080/api/account"
			}
			var productObj = JSON.stringify(account)
			console.log(account)
			$.ajax({
				url: linkUrl,
				type: methodName,
				data: productObj,
				contentType: 'application/json;charset=utf-8',
				success: function () {
					showEditPage.classList.add("myHidden");
					showUserPage.classList.remove("myHidden");
					showList()
				},error:function (){
					alert("ngu")
				}
			})
		})
	})

    $(document).ready(function () {

        $.ajax({
            type: 'GET',
            url: 'http://localhost:8080/api/statusmember',

            success: function (response) {
                console.log(response.data),
                    $.each(response.data, function (index, item) {
                        $('<option  value="'+item.id+'">').text(item.nameStatusMember).appendTo('#statusmember')
                    })
            ;
            }
        });
    })


    $(document).ready(function () {

        $.ajax({
            type: 'GET',
            url: 'http://localhost:8080/api/roles',

            success: function (response) {
                console.log(response.data),
                    $.each(response.data, function (index, item) {
                        $('<option value= "'+item.id+'">').text(item.nameRole).appendTo('#role')
                    })
                ;
            }
        });
    })


</script>
<!-- Mirrored from dmitryvolkov.me/demo/flixgo2.0/admin/users.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 08 Jan 2021 02:59:57 GMT -->
</html>